function findPlayers(a){var e=$(data.searchPlayers.get(a).parentElement);e.addClass("loading"),$.ajax({url:"ajax/sw",data:data.searchPlayers.get(a),success:function(r){if(r.data.players){r.data.players.length<1?(e.find(".search-players-empty .empty").show(),e.find(".search-players-more").hide()):r.data.players.length<50?e.find(".search-players-more").hide():(e.find(".search-players-more").show(),e.find(".search-players-empty .empty").hide());Twig.twig({href:_cfg.paths.views+"/ajax/players_html.twig?"+_cfg.twig,load:function(s){r.data.cfg=_cfg;var t=s.render(r.data);data.searchPlayers.get(a).offset>0?e.find(".search-players-list").append(t):e.find(".search-players-list").html(t)}})}},complete:function(){e.removeClass("loading")}})}function mapFiltersAndLoad(a,e){var r=$(data.searchPlayers.get(a).parentElement),s={};for(var t in data.searchPlayers.get(a).filtered=0,$(".search-players-filter-form").serializeArray().map((function(a){"on"==a.value&&(a.value=1),s[a.name]=parseInt(a.value)})),data.searchPlayers.get(a).filters)data.searchPlayers.get(a).filters.hasOwnProperty(t)&&void 0!==s[t]&&0!=s[t]?(data.searchPlayers.get(a).filters[t]=s[t],data.searchPlayers.get(a).filtered=1):data.searchPlayers.get(a).filters[t]=0;data.searchPlayers.get(a).filters.favs?svgChangeIcon(r.find(".search-players-filter-favs"),"star-filled"):svgChangeIcon(r.find(".search-players-filter-favs"),"star"),data.searchPlayers.get(a).filtered?r.find(".search-players-filter-btn").addClass("active"):r.find(".search-players-filter-btn").removeClass("active"),data.searchPlayers.get(a).offset=0,findPlayers(a),e&&history.back()}searchPlayers={post:"players",filters:{position:0,value:0,team:0,injured:0,favs:0,owner:0,benched:0},offset:0,order:0,name:"",filtered:0},data.searchGlobalPlayers=JSON.parse(JSON.stringify(searchPlayers)),data.searchGlobalPlayers.parentElement=".sw-content",data.searchMarketPlayers=JSON.parse(JSON.stringify(searchPlayers)),data.searchMarketPlayers.parentElement="#content",data.searchPlayers={get:function(a){return"marketPlayers"==a?data.searchMarketPlayers:data.searchGlobalPlayers}},sws.players={title:_("Jugadores"),post:data.searchPlayers.get("globalPlayers")},$("body").on("keyup",".search-players-input",(function(){var a=$(this),e=a.data("scope");data.searchPlayers.get(e).name.length<1&&""===a.val()||(data.searchPlayers.get(e).name=a.val(),data.searchPlayers.get(e).offset=0,findPlayers(e))})),$("body").on("click",".search-players-more",(function(){var a=$(this).data("scope");data.searchPlayers.get(a).offset+=50,findPlayers(a)})),$("body").on("click",".search-players-filter-favs",(function(){var a=$(this),e=a.data("scope"),r=$(data.searchPlayers.get(e).parentElement);0==data.searchPlayers.get(e).filters.favs?(data.searchPlayers.get(e).filtered=1,data.searchPlayers.get(e).filters.favs=1,svgChangeIcon(a,"star-filled")):(data.searchPlayers.get(e).filtered=0,data.searchPlayers.get(e).filters.favs=0,svgChangeIcon(a,"star")),data.searchPlayers.get(e).filtered?r.find(".search-players-filter-btn").addClass("active"):r.find(".search-players-filter-btn").removeClass("active"),data.searchPlayers.get(e).offset=0,findPlayers(e)})),$("body").on("click",".search-players-filter-apply",(function(){mapFiltersAndLoad($(this).data("scope"),!0)})),$("body").on("click",".search-players-filter-reset",(function(){var a=$(this).data("scope");$(".search-players-filter-form input[value=0]").prop("checked",!0),$(".search-players-filter-form input[value=-1]").prop("checked",!0),$(".search-players-filter-form select").val(0),$(".search-players-filter-form input[type=checkbox]").prop("checked",!1),mapFiltersAndLoad(a,!0)})),$("body").on("change",".search-players-sort",(function(){var a=$(this).data("scope");data.searchPlayers.get(a).offset=0,data.searchPlayers.get(a).order=this.value,findPlayers(a)}));var search_focus=!1;function callback_sw_players(){search_focus&&($(".search-players-input").focus(),search_focus=!1)}$("body").on("click",".btn-search-players",(function(){sendEvent("select_mag",{from:_cfg.pag})})),$("body").on("click",".btn-search-more",(function(){sendEvent("search_players",{origin:"more"}),search_focus=!0}));
var commonAnalytics=null,firebaseConfig=null;function getAnalytics(){if("undefined"==typeof ChampionCommon)return console.error("ChampionCommon not found, did you forget to build it?"),null;if(null!==commonAnalytics)return console.log("Analytics already on"),commonAnalytics;(commonAnalytics=ChampionCommon.getAnalytics(firebaseConfig)).init(),setUserProperties();var e=ChampionCommon.appStatus;new ChampionCommon.SessionTracking(300,e,localStorage,"bemanager_login_time").track((function(){commonAnalytics.send("af_login")}))}function setUserProperties(){_cfg.user&&_cfg.user.id&&commonAnalytics.setCustomerId(_cfg.user.id);var e={};void 0!==_cfg.userSegmentsBySku&&_cfg.userSegmentsBySku.length>0&&_cfg.userSegmentsBySku.forEach((function(n){e["segment_"+n]=!0})),Object.keys(e).length>0&&commonAnalytics.setCustomerProperties(e)}function sendEvent(e,n){console.log(e,n),setTimeout((function(){try{if("undefined"!=typeof MRInterface&&MRInterface.getVersion()<"2.58")return;if(null===getAnalytics())return;setUserProperties(),commonAnalytics.send(e,n)}catch(e){console.log("error while sending an event",e)}}),1)}void 0!==_cfg.firebase_config&&(firebaseConfig={apiKey:_cfg.firebase_config.api_key,authDomain:_cfg.firebase_config.auth_domain,databaseURL:_cfg.firebase_config.db_url,projectId:_cfg.firebase_config.project_id,storageBucket:_cfg.firebase_config.storage_bucket,messagingSenderId:_cfg.firebase_config.messaging_sender_id,appId:_cfg.firebase_config.app_id,measurementId:_cfg.firebase_config.measurement_id}),getAnalytics(),function(e,n,i,o,t){e[o]=e[o]||[],e[o].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=n.getElementsByTagName(i)[0],s=n.createElement(i);s.async=!0,s.src="https://www.googletagmanager.com/gtm.js?id=GTM-WKNSV2Q",a.parentNode.insertBefore(s,a)}(window,document,"script","dataLayer"),_cfg.firebase_enabled&&(firebase.initializeApp(firebaseConfig),analytics=firebase.analytics());
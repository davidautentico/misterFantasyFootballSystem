var AmazonSlot=function(){function e(e){this.slotID=e.el.id,this.slotName=e.name,this.sizes=this.getValidSizes(e)}return e.prototype.getValidSizes=function(e){return null!=e.sizes?e.sizes.filter((function(e){return e instanceof Array})):void 0},e}(),RequestManager=function(){this.aps=!1,this.prebid=!1},Ads=function(){function Ads(){this.slots=new Map,this.config={},this.sequences=new Map,this.reserved=new Map,this.pbjs=window.pbjs,this.apstag=new Apstag,this.doOnReady=[],this.isReady=!1,this.dfpConsentStatus=!1,this.enabledDisplayScroll=!0}return Ads.prototype.configure=function(e,t){e?Utils.set(e,t,this.config):this.config=t,this.initVideo()},Ads.prototype.init=function(){var e=this;this.breakpoint=Breakpoint.getCurrent().name;var t=this.config.disabledSlots;this.disabled=t&&t.get(this.breakpoint)||[],this.config.keys.d=this.breakpoint,this.config.keys.adUnitPath=this.config.unitname,this.config.keys.url=document.location.href,this.config.googletagVendorId=this.config.googletagVendorId?this.config.googletagVendorId:"google",this.config.aps&&this.apstag.init({pubID:this.config.aps.pubID,adServer:this.config.aps.adServer});var i=/.*[?&]sc=(.*)/.exec(document.location.href);i&&(this.config.keys.sc=i[1]),this.pbjs.setConfig({realTimeData:{auctionDelay:200,dataProviders:[{name:"ias",waitForIt:!0,params:{pubId:"931352",keyMappings:{id:"ias_id"}}},{name:"permutive",waitForIt:!0,params:{acBidders:["appnexus"]}}]},priceGranularity:{buckets:[{min:0,max:12,increment:.01},{min:12,max:20,increment:.5}]},mediaTypePriceGranularity:{video:{buckets:[{precision:2,max:20,increment:.5}]}},userSync:{filterSettings:{all:{bidders:["appnexus","rubicon","criteo","ix","smartadserver","richaudience"],filter:"include"}},syncsPerBidder:1,syncDelay:6e3},consentManagement:{cmpApi:"iab",timeout:1e3,allowAuctionWithoutConsent:!0},enableSendAllBids:!1,targetingControls:{alwaysIncludeDeals:!0},debug:!1,cache:{url:"https://prebid.adnxs.com/pbc/v1/cache"}}),null===document.querySelector("script[type='didomi/javascript']")&&window.gg.didomi.onTCLoaded((function(){Utils.loadScript("//securepubads.g.doubleclick.net/tag/js/gpt.js")})),Utils.set("googletag.cmd",[]),googletag.cmd.push((function(){console.debug("GPT loaded. Configuring...");var t=googletag.pubads();for(var i in e.config.keys)t.setTargeting(i,e.config.keys[i]);try{for(var o in window.localStorage){var n="ads.keys.";o.length>n.length&&o.substring(0,n.length)==n&&t.setTargeting(o.substring(n.length),window.localStorage[o])}}catch(e){console.log("Error when setting targeting from local storage",e)}t.collapseEmptyDivs(!0),t.enableAsyncRendering(),t.enableSingleRequest(),t.disableInitialLoad();t.addEventListener("slotRenderEnded",(function(t){e.onRender(t)})),googletag.enableServices(),e.isReady=!0,e.doOnReady.forEach((function(t){t.apply(e)}))})),this.initVideo()},Ads.prototype.onReady=function(e){this.isReady?e.apply(this):this.doOnReady.push(e)},Ads.prototype.biddersBack=function(e,t){t.aps&&t.prebid&&this.refreshAction(e)},Ads.prototype.display=function(e,t){var i=this;void 0===t&&(t=!1),this.onReady((function(){var o=i.getSlots(e,!0);t||(o=o.filter((function(e){return!e.requested}))),i.request(o)}))},Ads.prototype.displayOnScroll=function(e){var t=this;this.onReady((function(){console.debug("Display ads on scroll");var i=Utils.throttle(e.delay,(function(){if(t.enabledDisplayScroll){var i=window.innerHeight+e.threshold;t.getSlots(e.selector||"",!0).forEach((function(e){!e.requested&&e.el.getBoundingClientRect().top<i&&t.request([e])}))}}));document.addEventListener("scroll",i),document.addEventListener("touchmove",i),i.apply(t,[])}))},Ads.prototype.getSlots=function(e,t){void 0===e&&(e="");for(var i=[],o=document.querySelectorAll(e+"[data-ad-device="+this.breakpoint+"]"),n=0;n<o.length;n++){var s=o.item(n);s.id=s.id||"ad-"+Math.random().toString(36).substring(2);var a=this.slots.get(s.id);!a&&t&&(a=this.createSlot(s),this.slots.set(s.id,a),s.setAttribute("data-name",a.name)),a&&a.enabled&&i.push(a)}return i},Ads.prototype.findAndRemove=function(e,t){var i=e.indexOf(t);return-1==i?t:(e.splice(i,1),t+=1,this.findAndRemove(e,t))},Ads.prototype.createSlot=function(e){var t=this;if(!(o=e.getAttribute("data-ad-name"))){var i=e.getAttribute("data-ad-type"),o=i;if(this.config.sequential&&this.config.sequential.indexOf(i)>=0){var n=(this.sequences.get(i)||0)+1,s=this.reserved.get(i)||new Array;n=this.findAndRemove(s,n),this.sequences.set(i,n),o+=+n}else this.config.sectionable&&this.config.sectionable.indexOf(i)>=0&&(o+="-"+e.getAttribute("data-ad-section"))}var a={el:e,slotID:e.id,slotName:o,enabled:this.disabled.indexOf(o)<0,type:e.getAttribute("data-ad-type"),name:o,sizes:JSON.parse(e.getAttribute("data-ad-sizes")),keys:JSON.parse(e.getAttribute("data-ad-keys"))||{},callback:e.getAttribute("data-ad-callback"),requested:!1,displayed:!1};return a.enabled&&(this.setPrebid(a),googletag.cmd.push((function(){var e=a;e.ref||(e.ref=e.sizes?googletag.defineSlot(t.config.unitname,e.sizes,e.el.id):googletag.defineOutOfPageSlot(t.config.unitname,e.el.id),e.ref.addService(googletag.pubads())),Object.keys(e.keys).forEach((function(t){return e.ref.setTargeting(t,e.keys[t])})),e.ref.setTargeting("t",e.name)}))),a},Ads.prototype.remove=function(e,t){void 0===e&&(e="");var i=this.getSlots(e,!1),o=this;googletag.destroySlots(i.map((function(e){return("xs"==o.breakpoint&&"roba"==e.type||"md"==o.breakpoint&&"mega"==e.type&&t)&&o.reserveSlotSpace(e),e.ref}))),i.forEach((function(e){e.el.classList.remove("ad-displayed")}))},Ads.prototype.reserveSlotSpace=function(e){var t=document.querySelector("ins#"+e.el.id+" iframe"),i=getComputedStyle(t).height;t&&document.querySelector("ins#"+e.el.id).parentElement.setAttribute("style","height:"+i+";display:block")},Ads.prototype.resetSequences=function(){this.sequences.clear()},Ads.prototype.setReservedSequencebyType=function(e,t){var i=this.reserved.get(e)||new Array;i.push(t),this.reserved.set(e,i)},Ads.prototype.setPrebid=function(e){var t=[],i=this.config.prebid.bidders;if(delete i.ias,i)for(var o=0,n=Object.keys(i);o<n.length;o++){var s=n[o];try{var a=this[s].apply(this,[e,i[s]]);a&&t.push({bidder:s,params:a})}catch(t){console.error("Failed getting prebid data for",s,e,t)}}if(t.length>0&&e.sizes){var r=e.sizes.filter((function(e){return e instanceof Array}));this.pbjs.addAdUnits([{code:e.el.id,mediaTypes:{banner:{sizes:r}},bids:t}])}},Ads.prototype.appnexus=function(e,t){var i=t[this.breakpoint];"string"==typeof i&&(i=t[i]);var o=i[e.name];if(void 0!==window.__wmass){if(void 0!==window.__wmass.getSegments){var n=window.__wmass.getSegments();return o?{placementId:o,keywords:n}:void 0}return o?{placementId:o}:void 0}return o?{placementId:o}:void 0},Ads.prototype.rubicon=function(e,t){var i=t.slots[this.breakpoint];return"string"==typeof i&&(i=t[i]),i.indexOf(e.name)>=0?{accountId:t.params.accountId,siteId:t.params.siteId[this.breakpoint],zoneId:t.params.zoneId[this.breakpoint]}:void 0},Ads.prototype.criteo=function(e,t){if(t.networkId&&t.publisherSubIdPrefix)return{networkId:t.networkId,publisherSubId:t.publisherSubIdPrefix+"_"+this.breakpoint+"-"+e.name};var i=t[this.breakpoint];"string"==typeof i&&(i=t[i]);var o=i[e.name];return o?{zoneId:o}:void 0},Ads.prototype.smartadserver=function(e,t){var i=t[this.breakpoint];"string"==typeof i&&(i=t[i]);var o=i[e.name],n="posicion="+e.name+";adunit="+this.config.adUnitSection;if(void 0!==window.__wmass&&void 0!==window.__wmass.getSegments){var s=window.__wmass.getSegments(),a=Object.keys(s).map((function(e){return e+"="+s[e].join()}));n="posicion="+e.name+";adunit="+this.config.adUnitSection+";"+a.join(";")}return o?{domain:"https://prg.smartadserver.com",currency:"EUR",siteId:t.siteId,pageId:t.pageId,formatId:o,target:n}:void 0},Ads.prototype.richaudience=function(e,t){var i=t[this.breakpoint];"string"==typeof i&&(i=t[i]);var o=i[e.name],n={pid:o,supplyType:"site"};if(void 0!==window.__wmass&&void 0!==window.__wmass.getSegments){var s=window.__wmass.getSegments(),a=Object.keys(s).map((function(e){var t=[];return s[e].map((function(i){t.push(e+"="+i)})),t.join(";")}));n.keywords=a.join(";")}return o?n:void 0},Ads.prototype.request=function(e){var t=this,i=new RequestManager;e.forEach((function(e){return e.requested=!0}));var o=e.map((function(e){return e.el.id}));if(this.config.aps){var n=e.map((function(e){return new AmazonSlot(e)})).filter((function(e){return null!=e.sizes}));0==n.length?i.aps=!0:this.apstag.fetchBids({slots:n},function(o){googletag.cmd.push((function(){t.apstag.setDisplayBids(),i.aps=!0,console.log("apstag requested"),t.biddersBack(e,i)}))}.bind(this))}else i.aps=!0;this.pbjs.que.push(function(){0==o.length?t.refreshAction(e):t.pbjs.requestBids({timeout:t.config.prebid.timeout,adUnitCodes:o,bidsBackHandler:function(){googletag.cmd.push((function(){console.debug("Refreshing",o),console.log("prebid requested"),t.pbjs.setTargetingForGPTAsync(o),i.prebid=!0,t.biddersBack(e,i)}))}})}.bind(this))},Ads.prototype.refreshAction=function(e){var t=this;googletag.pubadsReady?(console.log("pubads requested"),googletag.cmd.push((function(){googletag.pubads().refresh(e.map((function(e){return e.ref})),{changeCorrelator:!1})}))):(console.debug("pubads not ready yet"),setTimeout((function(){t.refreshAction(e)}),1))},Ads.prototype.onRender=function(e){var t=this.slots.get(e.slot.getSlotElementId());this.afterRender(t,!e.isEmpty,e.size)},Ads.prototype.afterRender=function(slot,displayed,size){if(void 0!==slot){if(slot.displayed=displayed,slot.displayed){try{var bid=this.pbjs.getAllWinningBids().filter((function(e){return e.adUnitCode==slot.el.id}))[0];bid&&(slot.width=bid.width,slot.height=bid.height)}catch(e){}slot.width||(slot.width=size[0],slot.height=size[1]),slot.el.classList.add("ad-displayed")}slot.callback&&eval(slot.callback).apply(this,[slot])}},Ads.prototype.setRenderData=function(e,t,i){var o=this;void 0===e&&(e=""),this.getSlots(e,!1).forEach((function(e){o.afterRender(e,t,i)}))},Ads.prototype.requestVideoAdUrl=function(e){var t=this.videoAdUnitFactory.getAdUnit(e);this.pbjs.que.push((function(){this.pbjs.addAdUnits(t),this.pbjs.requestBids({adUnits:[t],bidsBackHandler:function(i){var o={section:window.adsCfg.adUnitSection,pageKeys:window.adsCfg.pageKeys,cat:window.adsCfg.keys.cat,id:window.adsCfg.keys.id,pos:e.slotName,d:window.adsCfg.keys.d,sc:window.adsCfg.keys.sc,gaId:window.adsCfg.keys.gaId,kv_joe:window.adsCfg.keys.kv_joe,t:e.videoPos};for(var n in e.customParams)o[n]=e.customParams[n];var s=this.adServers.dfp.buildVideoUrl({adUnit:t,params:{iu:window.adsCfg.unitname,cust_params:__wmass.getSegments({format:"gamvideohb",extraKw:o}),output:"vast"}});e.callback(s)}})}))},Ads.prototype.initVideo=function(){var e=new Map;e.set(Bidder.appnexus,new AppnexusBidderParametersFactory(this.breakpoint,this.config.prebid.bidders));var t=new BidderFilter(e);if(this.videoAdUnitFactory)this.videoAdUnitFactory.setBidderFilter(t);else{var i=new VideoBidDecorator;this.videoAdUnitFactory=new VideoAdUnitFactory(t,i)}},Ads.prototype.onScrollSmartPre=function(e,t){this.enabledDisplayScroll=!1},Ads.prototype.onScrollSmartPost=function(e,t){var i="md"==this.breakpoint?"[class=ad-displayed]":".ad-displayed:not([data-ad-type='mega'])",o=!(document.querySelectorAll("[data-gam=true]").length>0);this.remove(i,o),window.ean&&(window.ean=void 0),o||this.removeWallPaper(),"xs"==this.breakpoint&&this.requestSlots(".ad-displayed[data-ad-type='mega']"),this.resetSequences(),this.configure(null,e);var n=this;googletag.cmd.push((function(){console.debug("GPT loaded. Configuring...");var e=googletag.pubads();for(var t in n.config.keys)e.setTargeting(t,n.config.keys[t])}));var s=document.createElement("script");s.innerHTML="godo.ads.push(function(x) {x.display('[data-ad-lazy=false]');});",t.articleContainer.appendChild(s),this.enabledDisplayScroll=!0},Ads.prototype.requestSlots=function(e){void 0===e&&(e=""),this.getSlots(e,!1).forEach((function(e){e.requested=!1}))},Ads.prototype.removeWallPaper=function(){var e=document.querySelector("body"),t=document.querySelector("#main-container"),i=getComputedStyle(t).marginTop,o=document.querySelectorAll("[data-gam=true]"),n=document.querySelector("[data-gam-wall=true]");o.forEach((e=>e.remove())),n&&t.setAttribute("style","margin-top:calc(100vh + ("+i+"))"),e.classList.remove("wallpaper-adv-active")},Ads}(),Bidder;!function(e){e.appnexus="appnexus",e.rubicon="rubicon",e.criteo="criteo",e.smartadserver="smartadserver",e.richaudience="richaudience"}(Bidder||(Bidder={}));var AppnexusBidderParametersFactory=function(){function e(e,t){this.breakpoint=e,this.config=t[Bidder.appnexus.valueOf()]}return e.prototype.getParameters=function(e){var t;if(void 0!==this.config){var i=this.config[this.breakpoint];"string"==typeof i&&(i=this.config[i]),void 0!==i&&(t=i[e])}if(void 0===t)throw new Error;return void 0!==window.__wmass&&void 0!==window.__wmass.getSegments?{placementId:t,keywords:window.__wmass.getSegments()}:{placementId:t}},e}(),BidderFilter=function(){function e(e){this.parametersFactories=e}return e.prototype.getBids=function(e){for(var t=[],i=0,o=Object.keys(Bidder).map((function(e){return Bidder[e]})).filter((function(e){return"string"==typeof e}));i<o.length;i++){var n=o[i];try{var s=this.parametersFactories.get(n);s&&t.push({bidder:n,params:s.getParameters(e)})}catch(e){console.error("Failed getting prebid data for",n,e)}}return t},e}(),VideoBidDecorator=function(){function e(){}return e.prototype.decorate=function(e){e.params.video={skipppable:!1,playback_method:["auto_play_sound_on"]}},e}(),VideoMediatypeDecorator=function(){function e(){}return e.prototype.decorate=function(e){e.video={playerSize:[480,360],context:"instream"}},e}(),VideoAdUnitFactory=function(){function e(e,t){this.slotNameRequestedNum=new Map,this.bidderFilter=e,this.videoBidDecorator=t}return e.prototype.setBidderFilter=function(e){this.bidderFilter=e},e.prototype.getAdUnit=function(e){var t=this;return{code:this.getId(e.slotName),mediaTypes:{video:{playerSize:[480,360],context:"instream"}},bids:this.bidderFilter.getBids(e.slotName).map((function(e){return t.videoBidDecorator.decorate(e),e}))}},e.prototype.getId=function(e){var t=this.slotNameRequestedNum.get(e);return t||(t=0),t++,this.slotNameRequestedNum.set(e,t),e+"-"+t},e}();if(!window.Map||!window.Promise){var tag=document.createElement("script");tag.src="https://cdn.polyfill.io/v2/polyfill.js?features=es6|gated",tag.type="text/javascript",document.head.appendChild(tag)}window.godo,window.godo,Breakpoint.init([{name:"xs",maxWidth:767},{name:"md",maxWidth:1/0}]),CommandArray.wrap(new Ads,"godo.ads");